function f(e){let n=e.innerHTML;n.trim()?(n=n.replace(/(\d+)\|(\d+)/g,"\\(\\frac{$1}{$2}\\)"),n=n.replace(/\*/g,"\\cdot"),e.innerHTML=n,typeof MathJax<"u"&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])):(console.log("Content is empty, retrying..."),setTimeout(()=>f(e),100))}function b(e){const n=document.createElement("table");n.classList.add("match-table");const t=document.createElement("thead"),s=document.createElement("tr");s.appendChild(document.createElement("th")),["А","Б","В","Г","Д"].forEach(r=>{const l=document.createElement("th");l.textContent=r,s.appendChild(l)}),t.appendChild(s),n.appendChild(t);const d=document.createElement("tbody");let c=[];return e.conditions.forEach((r,l)=>{const m=document.createElement("tr"),i=document.createElement("td");i.textContent=l+1,i.classList.add("match-number-cell"),m.appendChild(i),e.answers.forEach((o,u)=>{const h=document.createElement("td"),a=document.createElement("input");a.type="radio",a.name=`question-${l}`,a.value=u,a.classList.add("match-radio"),o&&o.answer?a.setAttribute("data-value",o.key):a.setAttribute("data-value",o),a.setAttribute("data-row",l),a.setAttribute("data-column",u),a.setAttribute("data-question",r.key),a.addEventListener("change",y=>{y.target.getAttribute("data-row");const E=y.target.getAttribute("data-value"),g=y.target.getAttribute("data-question"),k={condition:g,answer:E},C=c.findIndex(q=>q.condition===g);C>-1?c[C].answer=E:c.push(k),localStorage.setItem("answers",JSON.stringify(c))}),h.appendChild(a),m.appendChild(h)}),d.appendChild(m)}),n.appendChild(d),n}const p=document.querySelector(".question-elements");function w(e){if(p.innerHTML="",e.type==="options"&&e.options.length>0){localStorage.setItem("type",e.type);const n=localStorage.getItem("selectedOption");console.log(e),e.options.forEach(t=>{const s=document.createElement("div");s.classList.add("option_cont");const d=document.createElement("button"),c=document.createElement("div");c.classList.add("unchoosed"),d.classList.add("option-button"),d.textContent=t.name,t.name===n&&c.classList.add("choosen"),d.addEventListener("click",()=>{const r=document.querySelector(".choosen");if(r===c){c.classList.remove("choosen"),localStorage.removeItem("selectedOption"),console.log("Выбор отменен");return}r&&r.classList.remove("choosen"),c.classList.add("choosen"),localStorage.setItem("selectedOption",t.key),console.log(`Вы выбрали: ${t.name}`)}),s.append(c),s.append(d),p.appendChild(s)})}else if(e.type==="input"){const n=document.createElement("div"),t=document.createElement("input"),s=document.createElement("p");localStorage.setItem("type",e.type),s.innerHTML=`${e.caption}`,s.classList.add("help-text"),t.classList.add("question-input"),t.placeholder="...",n.appendChild(s),n.appendChild(t),p.appendChild(n)}else if(e.type==="match"){localStorage.setItem("type",e.type);const n=document.createElement("ul"),t=document.createElement("ul"),s=document.createElement("div"),d=document.createElement("div"),c=document.createElement("p"),r=document.createElement("p");r.classList.add("match-title"),c.classList.add("match-title"),r.innerHTML=e.answersCaption,c.innerHTML=e.questionCaption,t.classList.add("answer-list"),n.classList.add("questions-list");let l=[];e.answers.forEach(i=>{const o=document.createElement("li");o.setAttribute("key",i.key),o.innerHTML=i.answer||i,o.classList.add("match-question-item"),o.dataset.key=i.key,o.addEventListener("click",()=>{const u=document.querySelector(".selected-question");if(u){const h=u.dataset.key,a=i.key;l=l.filter(y=>y.condition!==h),l.push({condition:h,answer:a}),u.classList.remove("selected-question"),l.length===4&&localStorage.setItem("selectedMatch",JSON.stringify({answer:l}))}}),t.appendChild(o)}),e.conditions.forEach(i=>{const o=document.createElement("li");o.classList.add("match-question-item"),o.setAttribute("key",i.key),o.dataset.key=i.key,o.innerHTML=` ${i.condition}`,o.addEventListener("click",()=>{document.querySelectorAll(".match-question-item").forEach(u=>u.classList.remove("selected-question")),o.classList.add("selected-question")}),n.appendChild(o)}),d.appendChild(c),d.appendChild(n),s.appendChild(r),s.appendChild(t),p.appendChild(d),p.appendChild(s);const m=b(e);p.appendChild(m),console.log(e)}}const T="https://harry-potter-test-preparation-backend.onrender.com/",L=document.querySelector(".condition");document.querySelector(".question-elements");function S(){let e=localStorage.getItem("taskId"),n=localStorage.getItem("token");return fetch(`${T}topic/task/${e}`,{method:"GET",headers:{Authorization:"Bearer "+n,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(t=>{if(!t.ok)throw new Error(`HTTP Error: ${t.status}`);return t.json()}).then(t=>(L.innerHTML=t.condition,localStorage.setItem("condition",t.condition),w(t),f(L),t)).catch(t=>{console.error("Error fetching task details:",t)})}export{S as G};
