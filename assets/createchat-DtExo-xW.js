function y(t){let e=t.innerHTML;e.trim()?(e=e.replace(/\bbelongs\b/g," ∈ "),e=e.replace(/\(([^|]+)\|(-?\d+)\)/g," \\(\\frac{$1}{$2}\\) "),e=e.replace(/а\^2/g,"a²").replace(/y\^3/g,"y³").replace(/а\^3/g,"a³").replace(/х\^2/g,"x²"),e=e.replace(/(\w+)\^(\d+)/g," \\($1^{$2}\\) "),e=e.replace(/\*/g," \\(\\cdot\\) "),e=e.replace(/(\d+)\s?πсм\^2/g,"$1 см²"),e=e.replace(/(\d+)\s?x\^2/g,"$1x²"),e=e.replace(/\(([^)]+)\)\^2/g,"($1)²"),e=e.replace(/(\d+)\s?см\^(-?\d+)/g," \\($1cм^{ $2 }\\) "),e=e.replace(/(\d+)\s?смм\^2(-?\d+)/g," a³"),e=e.replace(/(\d+)\s?pi/g,"$1π"),e=e.replace(/pi\s?см/g,"πсм"),e=e.replace(/\btriangle\s*/gi," \\(\\triangle \\) "),e=e.replace(/\bangle\s*(\w+)/gi," \\(\\angle $1\\) "),e=e.replace(/(\d+)\|(\d+)/g," \\(\\frac{$1}{$2}\\) "),t.innerHTML=e,typeof MathJax<"u"?MathJax.Hub.Queue(["Typeset",MathJax.Hub,t]):(console.log("MathJax не найден, повторная попытка..."),setTimeout(()=>y(t),100))):(console.log("Content is empty, retrying..."),setTimeout(()=>y(t),100))}function b(t){const e=document.createElement("table");e.classList.add("match-table");const n=document.createElement("thead"),s=document.createElement("tr");s.appendChild(document.createElement("th")),["А","Б","В","Г","Д"].forEach(d=>{const l=document.createElement("th");l.textContent=d,s.appendChild(l)}),n.appendChild(s),e.appendChild(n);const a=document.createElement("tbody");let c=[];return t.conditions.forEach((d,l)=>{const m=document.createElement("tr"),r=document.createElement("td");r.textContent=l+1,r.classList.add("match-number-cell"),m.appendChild(r),t.answers.forEach((o,u)=>{const h=document.createElement("td"),i=document.createElement("input");i.type="radio",i.name=`question-${l}`,i.value=u,i.classList.add("match-radio"),o&&o.answer?i.setAttribute("data-value",o.key):i.setAttribute("data-value",o),i.setAttribute("data-row",l),i.setAttribute("data-column",u),i.setAttribute("data-question",d.key),i.addEventListener("change",g=>{g.target.getAttribute("data-row");const f=g.target.getAttribute("data-value"),L=g.target.getAttribute("data-question"),T={condition:L,answer:f},k=c.findIndex(C=>C.condition===L);k>-1?c[k].answer=f:c.push(T),localStorage.setItem("answers",JSON.stringify(c))}),h.appendChild(i),m.appendChild(h)}),a.appendChild(m)}),e.appendChild(a),e}const p=document.querySelector(".question-elements");function I(t){if(p.innerHTML="",t.type==="options"&&t.options.length>0){localStorage.setItem("type",t.type);const e=localStorage.getItem("selectedOption");t.options.forEach(n=>{const s=document.createElement("div");s.classList.add("option_cont");const a=document.createElement("button"),c=document.createElement("div");c.classList.add("unchoosed"),a.classList.add("option-button"),a.textContent=n.name,y(a),n.name===e&&c.classList.add("choosen"),a.addEventListener("click",()=>{const d=document.querySelector(".choosen");if(d===c){c.classList.remove("choosen"),localStorage.removeItem("selectedOption");return}d&&d.classList.remove("choosen"),c.classList.add("choosen"),localStorage.setItem("selectedOption",n.key)}),s.append(c),s.append(a),p.appendChild(s)})}else if(t.type==="input"){const e=document.createElement("div"),n=document.createElement("input"),s=document.createElement("p");localStorage.setItem("type",t.type),s.innerHTML=`${t.caption}`,s.classList.add("help-text"),n.classList.add("question-input"),n.placeholder="...",e.appendChild(s),e.appendChild(n),p.appendChild(e)}else if(t.type==="match"){localStorage.setItem("type",t.type);const e=document.createElement("ul"),n=document.createElement("ul"),s=document.createElement("div"),a=document.createElement("div"),c=document.createElement("p"),d=document.createElement("p");d.classList.add("match-title"),c.classList.add("match-title"),d.innerHTML=t.answersCaption,c.innerHTML=t.questionCaption,n.classList.add("answer-list"),e.classList.add("questions-list");let l=[];t.answers.forEach(r=>{const o=document.createElement("li");o.setAttribute("key",r.key),o.innerHTML=r.answer||r,o.classList.add("match-question-item"),o.dataset.key=r.key,o.addEventListener("click",()=>{const u=document.querySelector(".selected-question");if(u){const h=u.dataset.key,i=r.key;l=l.filter(g=>g.condition!==h),l.push({condition:h,answer:i}),u.classList.remove("selected-question"),l.length===4&&localStorage.setItem("selectedMatch",JSON.stringify({answer:l}))}}),y(o),n.appendChild(o)}),t.conditions.forEach(r=>{const o=document.createElement("li");o.classList.add("match-question-item"),o.setAttribute("key",r.key),o.dataset.key=r.key,o.innerHTML=` ${r.condition}`,o.addEventListener("click",()=>{document.querySelectorAll(".match-question-item").forEach(u=>u.classList.remove("selected-question")),o.classList.add("selected-question")}),y(o),e.appendChild(o)}),a.appendChild(c),a.appendChild(e),s.appendChild(d),s.appendChild(n),p.appendChild(a),p.appendChild(s);const m=b(t);p.appendChild(m),console.log(t)}}const q="https://harry-potter-test-preparation-backend.onrender.com/",$=document.querySelector(".messages-list");function v(){let t=localStorage.getItem("token");fetch(`${q}ai-chat/`,{method:"GET",headers:{Authorization:"Bearer "+t,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{console.log("Результат:",e),e.messages.forEach(n=>{const s=document.createElement("li");n.role=="assistant"?s.classList.add("chat-answer"):n.role=="user"&&s.classList.add("user-messege"),s.innerHTML=n.content,$.append(s)})}).catch(e=>{alert("Помилка"),console.error("Помилка :",e)})}function _(){const t=document.querySelector(".module-menu");t&&t.classList.toggle("is-hidden")}const S="https://harry-potter-test-preparation-backend.onrender.com/",E=document.querySelector(".user-question"),w=document.querySelector(".messages-list");function j(){let t=localStorage.getItem("token");const e=JSON.stringify({message:E.value});fetch(`${S}ai-chat/`,{method:"PUT",headers:{Authorization:"Bearer "+t,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"},body:e}).then(n=>{if(!n.ok)throw new Error(`HTTP Error: ${n.status}`);return n.json()}).then(n=>{console.log("Результат:",n);const s=document.createElement("li");s.classList.add("user-messege");const a=document.createElement("li");a.classList.add("chat-answer"),s.innerHTML=E.value,a.innerHTML=n.content,w.append(s),w.append(a),E.value=""}).catch(n=>{alert("Помилка"),console.error("Помилка :",n)})}const M="https://harry-potter-test-preparation-backend.onrender.com/",H=document.querySelector(".messages-list");function J(){let t=localStorage.getItem("token");fetch(`${M}ai-chat/`,{method:"DELETE",headers:{Authorization:"Bearer "+t,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{localStorage.setItem("isChatExist",!1),H.innerHTML=""}).catch(e=>{alert("Помилка"),console.error("Помилка :",e)})}const x="https://harry-potter-test-preparation-backend.onrender.com/",A=document.querySelector(".messages-list");function O(){let t=localStorage.getItem("token");fetch(`${x}ai-chat/`,{method:"POST",headers:{Authorization:"Bearer "+t,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{console.log("Результат:",e),e.messages.forEach(n=>{const s=document.createElement("li");n.role=="assistant"&&s.classList.add("chat-answer"),s.innerHTML=n.content,A.append(s)}),localStorage.setItem("isChatExist",!0)}).catch(e=>{alert("Помилка"),console.error("Помилка :",e)})}export{_ as a,O as c,J as d,v as o,y as r,j as s,I as t};
