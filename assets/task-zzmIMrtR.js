import"./changetorigistrated-B8TaOUy0.js";import{t as a,r as i,a as c,c as l,d,o as g,s as u}from"./createchat-DtExo-xW.js";import"./main-UIHQNVnb.js";const m="https://harry-potter-test-preparation-backend.onrender.com/",s=document.querySelector(".condition"),p=document.querySelector(".all-in-auestion");document.querySelector(".question-elements");function h(){let n=localStorage.getItem("taskId"),o=localStorage.getItem("token");return fetch(`${m}topic/task/${n}`,{method:"GET",headers:{Authorization:"Bearer "+o,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{if(s.innerHTML=`${e.condition}`,e.captionPicture){const t=document.createElement("img");t.setAttribute("src",e.captionPicture),t.classList.add("task-picture"),p.appendChild(t)}return localStorage.setItem("condition",e.condition),console.log(e),a(e),i(s),e}).catch(e=>{console.error("Error fetching task details:",e)})}const k="https://harry-potter-test-preparation-backend.onrender.com/";function S(){console.log(localStorage.getItem("taskId"),localStorage.getItem("type"),localStorage.getItem("selectedOption"));let n=localStorage.getItem("token"),o=localStorage.getItem("type"),e;switch(o){case"options":e=JSON.stringify({selectedOptionId:localStorage.getItem("selectedOption"),_id:localStorage.getItem("taskId"),type:o});break;case"input":const t=document.querySelector(".question-input");e=JSON.stringify({answer:t.value.trim(),_id:localStorage.getItem("taskId"),type:o});break;case"match":let r=localStorage.getItem("answers");if(!r)return;r=JSON.parse(r),e=JSON.stringify({answer:r,_id:localStorage.getItem("taskId"),type:o});break;default:console.error("Unknown task type:",o);return}return fetch(`${k}answers`,{method:"POST",headers:{Authorization:"Bearer "+n,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"},body:e}).then(t=>{if(!t.ok)throw new Error(`HTTP Error: ${t.status}`);return t.json()}).then(t=>{t.score===t.maxScore||t.taskResults.score===t.maxScore?(alert(`Вітаємо ви вирішили правильно і отримали ${t.maxScore}`),localStorage.setItem("selectedOption","")):alert("Нажаль ви вирішили не вірно, спробуйте ще раз"),console.log(t)}).catch(t=>{console.error(t)})}const y=document.querySelector(".close-btn"),I=document.querySelector(".chat-svg"),f=document.querySelector(".finish-task"),w=document.querySelector(".send-messege-btn"),E=document.querySelector(".delete-chat-btn");I.addEventListener("click",()=>{c(),(localStorage.getItem("isChatExist")=="false"||localStorage.getItem("isChatExist")==null)&&l()});E.addEventListener("click",()=>{d(),c()});window.addEventListener("load",()=>{localStorage.getItem("isChatExist")=="true"&&g()});w.addEventListener("click",()=>{u()});y.addEventListener("click",()=>{c()});window.addEventListener("load",()=>{h()});f.addEventListener("click",()=>{S()});
