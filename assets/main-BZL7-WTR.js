(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();function u(){const o=document.querySelector(".nav-button"),t=localStorage.getItem("account_status")==="true";o&&(t?(o.innerHTML="Акаунт",o.setAttribute("href","./account.html")):(o.innerHTML="Реєстрація/вхід",o.setAttribute("href","./registration.html")))}const y="https://harry-potter-test-preparation-backend.onrender.com/",f=document.querySelector(".password"),S=document.querySelector(".surname");document.querySelector(".reg-sub");const _=document.querySelector(".email");function b(){const[o,t]=S.value.trim().split(" "),s={email:_.value.trim(),firstName:t,lastName:o,password:f.value.trim()};console.log(s),fetch(`${y}auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(r=>r.json()).then(r=>{localStorage.setItem("token",r.token),console.log("Результат реєстрації:",r)}).catch(r=>console.error("Помилка реєстрації:",r)),localStorage.setItem("account_status","true"),u()}const q={password_input:document.querySelector(".password"),surname_input:document.querySelector(".surname"),submit_form:document.querySelector(".reg-sub"),email_input:document.querySelector(".email")};document.querySelector(".change-btn");const i=document.querySelector(".reg-title"),l=document.querySelector(".name-label"),d=document.querySelector(".reg-sub"),m=document.querySelector(".change-text"),g=document.querySelector(".change-btn"),p=document.querySelector(".reg-sub_log");let c=localStorage.getItem("isReg")==="true";function h(){c=localStorage.getItem("isReg")==="true",c?(i.innerHTML="Вхід до акаунту",l.classList.add("hidden"),d.classList.add("hidden"),p.classList.remove("hidden"),m.innerHTML="Ще не маєте акаунту?",g.innerHTML="Реєстрація",c=!1):c||(i.innerHTML="Реєстрація",l.classList.remove("hidden"),m.innerHTML="вже зареєстровані?",g.innerHTML="Вхід до акаунту",c=!0,d.classList.remove("hidden"),p.classList.add("hidden")),localStorage.setItem("isReg",c)}const L={change:document.querySelector(".change-btn"),title:document.querySelector(".reg-title"),name_prop:document.querySelector(".name-label"),change_text:document.querySelector(".change-text"),change_btn:document.querySelector(".change-btn"),isReg:localStorage.getItem("isReg")==="true",submit_log:document.querySelector(".reg-sub_log")},v="https://harry-potter-test-preparation-backend.onrender.com/",w=document.querySelector(".password");document.querySelector(".reg-sub");const $=document.querySelector(".email");function I(){const o={email:$.value.trim(),password:w.value.trim()};console.log(o),fetch(`${v}auth/signin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(t=>t.json()).then(t=>{localStorage.setItem("account_status","true"),localStorage.setItem("token",t.token),console.log("Результат входу:",t),u()}).catch(t=>console.error("Помилка входу:",t)),u(),localStorage.setItem("account_status","true")}document.querySelector(".password"),document.querySelector(".reg-sub"),document.querySelector(".email"),document.querySelector(".nav-button");const{change:T,title:R,name_prop:N,change_text:E,change_btn:P,isReg:O,submit_log:M}=L,{password_input:x,surname_input:j,submit_form:H,email_input:k}=q;window.addEventListener("load",()=>{localStorage.setItem("isReg",!O),h()});window.addEventListener("load",()=>{u()});T.addEventListener("click",()=>{h()});M.addEventListener("click",()=>I());H.addEventListener("click",()=>b());
