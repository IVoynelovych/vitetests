import"./changetorigistrated-0usOyNcO.js";import{G as l}from"./task-make-BXbKq8Gq.js";import"./main-B9-p8Gvn.js";const i="https://harry-potter-test-preparation-backend.onrender.com/";function d(){console.log(localStorage.getItem("taskId"),localStorage.getItem("type"),localStorage.getItem("selectedOption"));let n=localStorage.getItem("token"),e=localStorage.getItem("type"),o;switch(e){case"options":o=JSON.stringify({selectedOptionId:localStorage.getItem("selectedOption"),_id:localStorage.getItem("taskId"),type:e});break;case"input":const t=document.querySelector(".question-input");o=JSON.stringify({answer:t.value.trim(),_id:localStorage.getItem("taskId"),type:e});break;case"match":let r=localStorage.getItem("answers");if(!r)return;r=JSON.parse(r),o=JSON.stringify({answer:r,_id:localStorage.getItem("taskId"),type:e});break;default:console.error("Unknown task type:",e);return}return fetch(`${i}answers`,{method:"POST",headers:{Authorization:"Bearer "+n,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"},body:o}).then(t=>{if(!t.ok)throw new Error(`HTTP Error: ${t.status}`);return t.json()}).then(t=>{console.log(t)}).catch(t=>{console.error(t)})}const g="https://harry-potter-test-preparation-backend.onrender.com/",u=document.querySelector(".messages-list");function h(){let n=localStorage.getItem("token");fetch(`${g}ai-chat/`,{method:"GET",headers:{Authorization:"Bearer "+n,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{console.log("Результат:",e),e.messages.forEach(o=>{const t=document.createElement("li");o.role=="assistant"?t.classList.add("chat-answer"):o.role=="user"&&t.classList.add("user-messege"),t.innerHTML=o.content,u.append(t)})}).catch(e=>{alert("Помилка"),console.error("Помилка :",e)})}function a(){const n=document.querySelector(".module-menu");n&&n.classList.toggle("is-hidden")}const m="https://harry-potter-test-preparation-backend.onrender.com/",s=document.querySelector(".user-question"),c=document.querySelector(".messages-list");function p(){let n=localStorage.getItem("token");const e=JSON.stringify({message:s.value});fetch(`${m}ai-chat/`,{method:"PUT",headers:{Authorization:"Bearer "+n,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"},body:e}).then(o=>{if(!o.ok)throw new Error(`HTTP Error: ${o.status}`);return o.json()}).then(o=>{console.log("Результат:",o);const t=document.createElement("li");t.classList.add("user-messege");const r=document.createElement("li");r.classList.add("chat-answer"),t.innerHTML=s.value,r.innerHTML=o.content,c.append(t),c.append(r),s.value=""}).catch(o=>{alert("Помилка"),console.error("Помилка :",o)})}const k="https://harry-potter-test-preparation-backend.onrender.com/",S=document.querySelector(".messages-list");function f(){let n=localStorage.getItem("token");fetch(`${k}ai-chat/`,{method:"DELETE",headers:{Authorization:"Bearer "+n,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{localStorage.setItem("isChatExist",!1),S.innerHTML=""}).catch(e=>{alert("Помилка"),console.error("Помилка :",e)})}const w="https://harry-potter-test-preparation-backend.onrender.com/",y=document.querySelector(".messages-list");function E(){let n=localStorage.getItem("token");fetch(`${w}ai-chat/`,{method:"POST",headers:{Authorization:"Bearer "+n,"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"}}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{console.log("Результат:",e),e.messages.forEach(o=>{const t=document.createElement("li");o.role=="assistant"&&t.classList.add("chat-answer"),t.innerHTML=o.content,y.append(t)}),localStorage.setItem("isChatExist",!0)}).catch(e=>{alert("Помилка"),console.error("Помилка :",e)})}const T=document.querySelector(".close-btn"),I=document.querySelector(".chat-svg"),b=document.querySelector(".finish-task"),L=document.querySelector(".send-messege-btn"),_=document.querySelector(".delete-chat-btn");I.addEventListener("click",()=>{a(),console.log(localStorage.getItem("isChatExist")),localStorage.getItem("isChatExist")=="false"&&(console.log(123),E())});_.addEventListener("click",()=>{f(),a()});window.addEventListener("load",()=>{localStorage.getItem("isChatExist")=="true"&&h()});L.addEventListener("click",()=>{p()});T.addEventListener("click",()=>{a()});window.addEventListener("load",()=>{l()});b.addEventListener("click",()=>{d()});
