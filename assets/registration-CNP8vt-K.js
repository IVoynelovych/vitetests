import{c}from"./changetorigistrated-DiyhUFzb.js";const h="https://harry-potter-test-preparation-backend.onrender.com/",p=document.querySelector(".password"),S=document.querySelector(".surname");document.querySelector(".reg-sub");const _=document.querySelector(".email");function y(){const[r,e]=S.value.trim().split(" "),g={email:_.value.trim(),firstName:e,lastName:r,password:p.value.trim()};fetch(`${h}auth/signup`,{method:"POST",headers:{"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"},body:JSON.stringify(g)}).then(t=>{if(!t.ok)throw new Error(`HTTP Error: ${t.status}`);return t.json()}).then(t=>{localStorage.setItem("token",t.token),console.log("Результат реєстрації:",t),localStorage.setItem("account_status","true"),c(),window.location.href="../account.html"}).catch(t=>{alert("Помилка реєстрації"),console.error("Помилка реєстрації:",t)})}const b={password_input:document.querySelector(".password"),surname_input:document.querySelector(".surname"),submit_form:document.querySelector(".reg-sub"),email_input:document.querySelector(".email")};document.querySelector(".change-btn");const s=document.querySelector(".reg-title"),a=document.querySelector(".name-label"),u=document.querySelector(".reg-sub"),l=document.querySelector(".change-text"),i=document.querySelector(".change-btn"),m=document.querySelector(".reg-sub_log"),n=document.querySelector(".stable-reg");let o=localStorage.getItem("isReg")==="true";function d(){o=localStorage.getItem("isReg")==="true",o?(s.innerHTML="Вхід до акаунту",a.classList.add("hidden"),u.classList.add("hidden"),m.classList.remove("hidden"),n.classList.remove("stable-reg"),console.log(n),l.innerHTML="Ще не маєте акаунту?",i.innerHTML="Реєстрація",o=!1):o||(s.innerHTML="Реєстрація",a.classList.remove("hidden"),n.classList.add("stable-reg"),console.log(n),l.innerHTML="вже зареєстровані?",i.innerHTML="Вхід до акаунту",o=!0,u.classList.remove("hidden"),m.classList.add("hidden")),localStorage.setItem("isReg",o)}const q={change:document.querySelector(".change-btn"),title:document.querySelector(".reg-title"),name_prop:document.querySelector(".name-label"),change_text:document.querySelector(".change-text"),change_btn:document.querySelector(".change-btn"),isReg:localStorage.getItem("isReg")==="true",submit_log:document.querySelector(".reg-sub_log")},w="https://harry-potter-test-preparation-backend.onrender.com/",f=document.querySelector(".password");document.querySelector(".reg-sub");const L=document.querySelector(".email");function $(){const r={email:L.value.trim(),password:f.value.trim()};fetch(`${w}auth/signin`,{method:"POST",headers:{"ngrok-skip-browser-warning":"69420","Content-Type":"application/json"},body:JSON.stringify(r)}).then(e=>{if(!e.ok)throw new Error(`HTTP Error: ${e.status}`);return e.json()}).then(e=>{console.log("Результат входу:",e.token),console.log("Результат входу:",e),localStorage.setItem("account_status","true"),c(),window.location.href="../account.html",localStorage.setItem("token",e.token)}).catch(e=>{alert("Помилка входу"),console.error("Помилка входу:",e)})}document.querySelector(".password"),document.querySelector(".reg-sub"),document.querySelector(".email"),document.querySelector(".nav-button");const{change:k,title:H,name_prop:R,change_text:M,change_btn:x,isReg:v,submit_log:T}=q,{password_input:j,surname_input:N,submit_form:E,email_input:O}=b;window.addEventListener("load",()=>{localStorage.setItem("isReg",!v),d()});window.addEventListener("load",()=>{c()});k.addEventListener("click",()=>{d()});T.addEventListener("click",()=>$());E.addEventListener("click",()=>y());
